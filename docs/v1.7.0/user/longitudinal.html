
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Longitudinal Preprocessing &#8212; C-PAC 1.7.0 Beta documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../genindex" />
    <link rel="search" title="Search" href="../search" />
    <link rel="next" title="Nuisance Signal Regression" href="nuisance" />
    <link rel="prev" title="Functional Preprocessing" href="func" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="nuisance" title="Nuisance Signal Regression"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="func" title="Functional Preprocessing"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index">C-PAC 1.7.0 Beta documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index" >Welcome to C-PAC’s user guide!</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="preprocessing" accesskey="U">Pre-Processing Steps</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Longitudinal Preprocessing</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="longitudinal-preprocessing">
<h1>Longitudinal Preprocessing<a class="headerlink" href="#longitudinal-preprocessing" title="Permalink to this headline">¶</a></h1>
<div class="flowchart-container"><object data="../_static/flowcharts/longitudinal.svg" type="image/svg+xml"></object></div><div class="section" id="background">
<h2>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<p>Longitudinal preprocessing pipeline is designed to process longitudinal data with two or more sessions. Based on <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S1053811912002765?via%3Dihub">Reuter et al. 2012</a>, all secions of subjects are first preprocessed independently and then a within-subject template is created by averaging all sessions of the subject. Subsequently the within-subject template is registered to standard space and all sections are then registered to the longitudinal template in standard space.</p>
<div class="section" id="configuring-cpac-to-run-longitudinal-preprocessing-pipeline">
<h3>Configuring CPAC to Run Longitudinal Preprocessing Pipeline<a class="headerlink" href="#configuring-cpac-to-run-longitudinal-preprocessing-pipeline" title="Permalink to this headline">¶</a></h3>
<div class="figure align-default">
<img alt="../_images/longitudinal.png" src="../_images/longitudinal.png" />
</div>
<ol class="arabic simple">
<li><p><strong>Longitudinal - [On, Off]:</strong>  Run longitudinal preprocessing pipeline or not. Default is Off.</p></li>
<li><p><strong>Average Method - [string]:</strong> Method to average longitudinal template. Default is median.</p></li>
<li><p><strong>DOF - [integer]:</strong>  Transform degree of freedom in flirt. Default is 12.</p></li>
<li><p><strong>Interpolation - [string]:</strong> Interpolation in flirt. Default is trilinear.</p></li>
<li><p><strong>Cost Function - [string]:</strong> Cost function in flirt. Default is corratio.</p></li>
<li><p><strong>Thread Pool - [integer]:</strong>  Number of threads in a thread pool. More threads can speed up the longitudinal template creation process. Default is 2.</p></li>
<li><p><strong>Convergence Threshold - [integer]:</strong> Convergence threshold of longitudinal template. Default is -1, which uses numpy.finfo(np.float64).eps.</p></li>
</ol>
</div>
<div class="section" id="configuration-without-the-gui">
<h3>Configuration Without the GUI<a class="headerlink" href="#configuration-without-the-gui" title="Permalink to this headline">¶</a></h3>
<p>The following key/value pairs must be defined in your <a class="reference internal" href="pipeline_config"><span class="doc">pipeline configuration YAML</span></a> for C-PAC to run longitudinal preprocessing:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 60%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Potential Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>run_longitudinal</p></td>
<td><p>Run longitudinal preprocessing.</p></td>
<td><p>A list of containing ‘anat’ (e.g., [‘anat’])</p></td>
</tr>
<tr class="row-odd"><td><p>longitudinal_template_average_method</p></td>
<td><p>Method to average sessions to create a longitudinal template.</p></td>
<td><p>A string of ‘median’, ‘mean’ or ‘std’ (e.g. ‘median’)</p></td>
</tr>
<tr class="row-even"><td><p>longitudinal_template_dof</p></td>
<td><p>Transform degree of freedom in flirt.</p></td>
<td><p>An integer (e.g. 12)</p></td>
</tr>
<tr class="row-odd"><td><p>longitudinal_template_interp</p></td>
<td><p>Interpolation in flirt.</p></td>
<td><p>A string of ‘trilinear’, ‘nearestneighbour’, ‘sinc’ or ‘spline’ (e.g. ‘trilinear’)</p></td>
</tr>
<tr class="row-even"><td><p>longitudinal_template_cost</p></td>
<td><p>Cost function in flirt.</p></td>
<td><p>A string of ‘mutualinfo’, ‘corratio’, ‘normcorr’, ‘normmi’, ‘leastsq’, ‘labeldiff’, ‘bbr’ (e.g. ‘corratio’)</p></td>
</tr>
<tr class="row-odd"><td><p>longitudinal_template_thread_pool</p></td>
<td><p>Number of threads in a thread pool.</p></td>
<td><p>An integer (e.g. 2)</p></td>
</tr>
<tr class="row-even"><td><p>longitudinal_template_convergence_threshold</p></td>
<td><p>Convergence threshold of longitudinal template.</p></td>
<td><p>An integer or a float (e.g. 0.01)</p></td>
</tr>
</tbody>
</table>
<p>The box below contains an example of what these parameters might look like when defined in the YAML:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">run_longitudinal</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;anat&#39;</span><span class="p">]</span>
<span class="n">longitudinal_template_average_method</span> <span class="p">:</span> <span class="n">median</span>
<span class="n">longitudinal_template_dof</span> <span class="p">:</span> <span class="mi">12</span>
<span class="n">longitudinal_template_interp</span> <span class="p">:</span> <span class="n">trilinear</span>
<span class="n">longitudinal_template_cost</span> <span class="p">:</span> <span class="n">corratio</span>
<span class="n">longitudinal_template_thread_pool</span> <span class="p">:</span> <span class="mi">2</span>
<span class="n">longitudinal_template_convergence_threshold</span> <span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p>Martin Reuter, Nicholas J.Schmansky, H. Diana Rosas, Bruce Fischl. <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S1053811912002765?via%3Dihub">Within-subject template estimation for unbiased longitudinal image analysis.</a> Neuroimage. 2012 July 16; 61(4): 1402–1418. doi:10.1016/j.neuroimage.2012.02.084.</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index">
              <img class="logo" src="../_static/cpac_logo_vertical.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index">Table of Contents</a></h3>
  <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index#the-c-pac-mission">The C-PAC Mission</a></li>
<li class="toctree-l2"><a class="reference internal" href="index#latest-release-version-1-7-0-beta-jul-23-2020">Latest Release: Version 1.7.0 Beta (Jul 23, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="index#the-c-pac-team">The C-PAC Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="index#funding-acknowledgements">Funding Acknowledgements</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index#user-guide-index">User Guide Index</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="quick">1. C-PAC Quickstart</a></li>
<li class="toctree-l3"><a class="reference internal" href="subject_list_config">2. Specify Your Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="pipeline_config">3. Select Your Pipeline</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="preprocessing">4. Pre-Process Your Data</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="anat">Anatomical Preprocessing</a></li>
<li class="toctree-l4"><a class="reference internal" href="func">Functional Preprocessing</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Longitudinal Preprocessing</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#background">Background</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#configuring-cpac-to-run-longitudinal-preprocessing-pipeline">Configuring CPAC to Run Longitudinal Preprocessing Pipeline</a></li>
<li class="toctree-l6"><a class="reference internal" href="#configuration-without-the-gui">Configuration Without the GUI</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="nuisance">Nuisance Corrections</a></li>
<li class="toctree-l4"><a class="reference internal" href="aroma_ica">ICA Denoising</a></li>
<li class="toctree-l4"><a class="reference internal" href="tse">Timeseries Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="tse#configuring-roi-time-series-extraction">Configuring ROI Time Series Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="after_warp">After Warp Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="derivatives">5. Compute Derivatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="running">6. All Run Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_analysis">7. Run Group Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_dir">8. Check Your Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="help">9. Troubleshoot</a></li>
<li class="toctree-l3"><a class="reference internal" href="rnotes">10. Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix">Appendix</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix#benchmark-package">Benchmark Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index">Welcome to CPAC’s developer documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index#indices-and-tables">Indices and tables</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="nuisance" title="Nuisance Signal Regression"
             >next</a> |</li>
        <li class="right" >
          <a href="func" title="Functional Preprocessing"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index">C-PAC 1.7.0 Beta documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index" >Welcome to C-PAC’s user guide!</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="preprocessing" >Pre-Processing Steps</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Longitudinal Preprocessing</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, C-PAC Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-19224662-10"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-19224662-10');
    </script>
    <script defer src="https://fcp-indi.github.io/scripts/versionList.js"></script>

  </body>
</html>