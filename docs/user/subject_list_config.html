
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Setting Up A Data Configuration File (Participant/Subject List) &#8212; C-PAC 1.6.0 Beta documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Setting Up A Pipeline Configuration" href="pipeline_config.html" />
    <link rel="prev" title="C-PAC Quickstart" href="quick.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="pipeline_config.html" title="Setting Up A Pipeline Configuration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="quick.html" title="C-PAC Quickstart"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">C-PAC 1.6.0 Beta documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="setting-up-a-data-configuration-file-participant-subject-list">
<h1>Setting Up A Data Configuration File (Participant/Subject List)<a class="headerlink" href="#setting-up-a-data-configuration-file-participant-subject-list" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p><strong>C-PAC’s Configuration YAML Files</strong></p>
<p>C-PAC requires at least one pipeline configuration file and one data configuration file (also known as the participant list/subject list) in order to run an analysis. These configuration files are in the YAML file format, which matches contents in a key: value relationship much like a dictionary. This section will focus on the data configuration file setup.</p>
<p><strong>The Data Configuration (Participant List)</strong></p>
<p>The data configuration file is essentially a list of file paths to anatomical and functional MRI scans keyed by their unique IDs, and listed with any additional information as necessary. This file can be generated both via the GUI and the terminal. Both ways are explained below.</p>
<p><strong>UPDATE (May 15, 2018): C-PAC v1.1.0 and Later</strong>
The data configuration file layout has changed significantly from older versions. Functional scan file paths, and scan parameter information (or scan parameter file paths) are now nested beneath the “func:” key. See the “Data Configuration File YAML Fields” section below for examples.</p>
<p>If you have already-existing data configuration files and wish to update these for the new version, you can simply use your already-existing data settings preset files to regenerate the data configuration files using your new/upgraded install of C-PAC v1.1.0. If you have any questions, please feel free to reach us at our <a class="reference external" href="https://groups.google.com/forum/#!forum/cpax_forum">support forum</a>.</p>
</div>
<div class="section" id="using-the-gui">
<h2>Using the GUI<a class="headerlink" href="#using-the-gui" title="Permalink to this headline">¶</a></h2>
<p>The C-PAC data configuration builder window accepts information about where to find your data, and allows you to customize what gets included in the final list. Once you’re done, it generates a <strong>data settings</strong> YAML file, which saves your preferences, so that you can easily edit and re-generate your <strong>data configuration</strong> YAML file later on.</p>
<div class="figure">
<img alt="_images/subject_list_gui.png" src="_images/subject_list_gui.png" />
</div>
<ol class="arabic simple">
<li><strong>Data format - [BIDS, Custom]:</strong> Whether or not the data is organized in accordance with the BIDS specification. More details below.</li>
<li><strong>BIDS Base Directory - [path]:</strong> The base directory of the BIDS-organized data, if you are using BIDS.</li>
<li><strong>Anatomical File Path Template - [text]:</strong> If the data is NOT in BIDS format, you can provide a file path template describing the anatomical scans here. More details below.</li>
<li><strong>Functional File Path Template - [text]:</strong> If the data is NOT in BIDS format, you can provide a file path template describing the functional scans here. More details below.</li>
<li><strong>Save Config Files Here - [path]:</strong> The directory where you want the data configuration builder to save both the <strong>data settings</strong> file (these configured options) and the <strong>data configuration</strong> file (the list of input data to be provided to CPAC).</li>
<li><strong>Participant List Name - [text]:</strong> The name/label for your data configuration and data settings files.</li>
<li><strong>(Optional) Which Anatomical Scan? - [text]:</strong> Sometimes, there are multiple anatomical scans per participant in a dataset. To make life easier, you can tell the data configuration builder which anatomical scan to select for each participant by entering a sub-string here that can be found in the name or label of the anatomical scan you’d like to use for the run. Also, if you are using the Custom Anatomical File Path Template, you can enter a wildcard (*) in the path template in the anatomical scan file name, and the sub-string you enter here will determine which of the files returned by that wildcard is written into the data configuration.</li>
<li><strong>(Optional) AWS Credentials File - [path]:</strong> Required if downloading data from a non-public S3 bucket on Amazon Web Services (AWS). This usually takes the form of a CSV file.</li>
<li><strong>(Optional) Scan Parameters File - [path]:</strong>  Path to a CSV file specifying the slice time acquisition parameters for scans.  If set to ‘None’, these parameters will either be defined by the NifTI headers or by an explicit slice order specified in the pipeline configuration builder. Instructions for creating this CSV file can be found <a class="reference internal" href="func.html"><span class="doc">here</span></a>. <strong>Note:</strong> If your data is in BIDS format, the data configuration builder will read the scan parameters described in the data’s affiliated JSON file(s), if they exist, and a scan parameters CSV file is not required.</li>
<li><strong>(Optional) Brain Mask File Path Template - [text]:</strong> File Path Template for brain mask files. For anatomical skull-stripping. Note: use this for BIDS data directories as well, as the specification for anatomical brain masks is still subject to change. Place tags for the appropriate data directory levels with the tags {site}, {participant}, and {session}. Only {participant} is required. Example: /data/{site}/{participant}/{session}/{participant}_{session}_brain-mask.nii.gz</li>
<li><strong>(Optional) Field Map Phase File Path Template - [text]:</strong> If you are running field map-based distortion correction, AND your data is not in BIDS format, provide the file path template to your phase files here. If your data is in BIDS format, the data configuration builder will find these files automatically.</li>
<li><strong>(Optional) Field Map Magnitude File Path Template - [text]:</strong> If you are running field map-based distortion correction, AND your data is not in BIDS format, provide the file path template to your magnitude difference files here. If your data is in BIDS format, the data configuration builder will find these files automatically.</li>
<li><strong>(Optional) Include: Subjects - [text/path]:</strong> List the participant IDs to include, to have only those participants included in the list. Either enter it here (ex. “1001, 1002, 1007, ..”), or enter the file path of a text file containing each participant ID on its own line.</li>
<li><strong>(Optional) Exclude: Subjects - [text/path]:</strong> The same as above, except to exclude the participants you list here. Useful for when you only need a few dropped from the list of many.</li>
<li><strong>(Optional) Include: Sites - [text/path]:</strong> Which sites to include - can be a list or a text file, as described above.</li>
<li><strong>(Optional) Exclude: Sites - [text/path]:</strong> Which sites to exclude - can be a list or a text file, as described above.</li>
<li><strong>(Optional) Include: Sessions - [text/path]:</strong> Which sessions to include - can be a list or a text file, as described above.</li>
<li><strong>(Optional) Exclude: Sessions - [text/path]:</strong> Which sessions to exclude - can be a list or a text file, as described above.</li>
<li><strong>(Optional) Include: Series - [text/path]:</strong> Which series to include - can be a list or a text file, as described above.</li>
<li><strong>(Optional) Exclude: Series - [text/path]:</strong> Which series to exclude - can be a list or a text file, as described above.</li>
</ol>
<p>Continue below for some example use cases.</p>
</div>
<div class="section" id="from-terminal">
<h2>From Terminal<a class="headerlink" href="#from-terminal" title="Permalink to this headline">¶</a></h2>
<p>You can configure the settings explained above in the <strong>data settings</strong> YAML file, then use the C-PAC command-line interface to generate your <strong>data configuration</strong> file.</p>
<p>If you don’t already have a data settings YAML file, you can generate one in your current directory by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cpac</span> <span class="n">utils</span> <span class="n">data_config</span> <span class="n">new_template</span>
</pre></div>
</div>
<p>You can then configure the file as needed. Once your data settings file is ready, you can generate your data configuration file by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cpac</span> <span class="n">utils</span> <span class="n">data_config</span> <span class="n">build</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">data_settings</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>Continue below for some example use cases.</p>
</div>
<div class="section" id="data-bids-format">
<h2>Data: BIDS Format<a class="headerlink" href="#data-bids-format" title="Permalink to this headline">¶</a></h2>
<p>A full description of the BIDS data organization specification can be found at <a class="reference external" href="http://bids.neuroimaging.io/">bids.neuroimaging.io</a>.</p>
<p>This is the simplest option. As the data is in BIDS format, the C-PAC data configuration builder will know where to find all of the input files, the scan parameters (if available), site information, and field map files (if applicable). The inclusion and exclusion options for the different data levels (participant, site, etc.) work as usual.</p>
<p><strong>Using the GUI</strong></p>
<p>Select “BIDS” as your Data Format, and specify where to save the configuration files and the participant list name. Then, provide the BIDS Base Directory, which is the top-most directory level within which your BIDS-organized data set is stored. Click <code class="docutils literal notranslate"><span class="pre">Generate</span> <span class="pre">Data</span> <span class="pre">Config</span></code> in the bottom-right corner to generate the data configuration, and to also save this setup into a data settings file. If you only want to save the settings to generate the data configuration for later, click <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Preset</span></code>.</p>
<p><strong>Using the cpac_data_config_setup.py script</strong></p>
<p>In the data settings file, populate these fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataFormat</span><span class="p">:</span>                  <span class="p">[</span><span class="s1">&#39;BIDS&#39;</span><span class="p">]</span>
<span class="n">bidsBaseDir</span><span class="p">:</span>                 <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">BIDS</span><span class="o">/</span><span class="n">directory</span>
<span class="n">outputSubjectListLocation</span><span class="p">:</span>   <span class="o">/</span><span class="n">save</span><span class="o">/</span><span class="n">configs</span><span class="o">/</span><span class="n">here</span>
<span class="n">subjectListName</span><span class="p">:</span>             <span class="n">data_config_name</span>
</pre></div>
</div>
<p>You can also fill in the AWS credentials file field, and the inclusion and exclusion fields, as needed.</p>
<p>Once your data settings file is ready, generate your data configuration file by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cpac</span> <span class="n">utils</span> <span class="n">data_config</span> <span class="n">build</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">data_settings</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
</div>
<div class="section" id="data-custom-layout">
<h2>Data: Custom Layout<a class="headerlink" href="#data-custom-layout" title="Permalink to this headline">¶</a></h2>
<p>The C-PAC Data Configuration builder can handle a wide range of different directory organization layouts, but can only do it seamlessly for you if all of your data is organized in that same layout. If you have input files arranged in different ways, simply generate two different data configuration files, and then manually add one to the end of the other, in a text editor.</p>
<p><strong>Using the GUI</strong></p>
<p>Set your Data Format to “Custom”, and leave the BIDS Base Directory blank.</p>
<p>In the Anatomical File Path Template field, enter the full file path to any of your anatomical/structural input files (including the file extension .nii/.nii.gz), and then replace the appropriate directory levels with these tags:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">participant</span><span class="p">}</span>
<span class="p">{</span><span class="n">site</span><span class="p">}</span>           <span class="p">(</span><span class="k">if</span> <span class="n">applicable</span><span class="p">)</span>
<span class="p">{</span><span class="n">session</span><span class="p">}</span>        <span class="p">(</span><span class="k">if</span> <span class="n">applicable</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Note:</strong> C-PAC currently does not support multiple anatomical series/scans/runs at this time, but will do so in the following release!</p>
<p>Your template paths should look something like this, for the corresponding directory layouts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Actual</span> <span class="n">file</span><span class="p">:</span>     <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="mi">01</span><span class="o">/</span><span class="n">sub1003</span><span class="o">/</span><span class="n">session</span><span class="o">-</span><span class="n">A1</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">mprage</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>
<span class="n">Template</span> <span class="n">path</span><span class="p">:</span>   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="p">{</span><span class="n">site</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">participant</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">session</span><span class="p">}</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">mprage</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>

<span class="n">Actual</span> <span class="n">file</span><span class="p">:</span>     <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="mi">03</span><span class="o">/</span><span class="n">sub</span><span class="o">-</span><span class="mi">1005</span><span class="n">_session</span><span class="o">-</span><span class="n">B1</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">anat</span><span class="o">.</span><span class="n">nii</span>
<span class="n">Template</span> <span class="n">path</span><span class="p">:</span>   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="p">{</span><span class="n">site</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">participant</span><span class="p">}</span><span class="n">_</span><span class="p">{</span><span class="n">session</span><span class="p">}</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">anat</span><span class="o">.</span><span class="n">nii</span>
</pre></div>
</div>
<p>For the Functional File Path Template field, repeat the process with your functional input files. In addition, different levels of series/scans can be denoted with the following tag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">series</span><span class="p">}</span>
</pre></div>
</div>
<p>If you have field map files, and wish to perform field map-based distortion correction, the same process can be repeated for your field map phase and magnitude files, via the Field Map Phase File Path Template and Field Map Magnitude File Path Template fields in the GUI.</p>
<p>For the file path templates, only the <code class="docutils literal notranslate"><span class="pre">{participant}</span></code> tags are required. Defaults will be assigned to the other levels if they do not exist.</p>
<p>Then, fill in the fields for where you want the data configuration builder to save your files, and the name/label to use to name the files.</p>
<p>Once your settings are complete, nt list name. click <code class="docutils literal notranslate"><span class="pre">Generate</span> <span class="pre">Data</span> <span class="pre">Config</span></code> in the bottom-right corner to generate the data configuration, and to also save this setup into a data settings file. If you only want to save the settings to generate the data configuration for later, click <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Preset</span></code>.</p>
<p><strong>Using the C-PAC command-line interface (CLI)</strong></p>
<p>Following the instructions for formatting your path templates given above, populate these fields in your data settings file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataFormat</span><span class="p">:</span>                  <span class="p">[</span><span class="s1">&#39;Custom&#39;</span><span class="p">]</span>
<span class="n">anatomicalTemplate</span><span class="p">:</span>          <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="p">{</span><span class="n">site</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">participant</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">series</span><span class="p">}</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">mprage</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>
<span class="n">functionalTemplate</span><span class="p">:</span>          <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="p">{</span><span class="n">site</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">participant</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">series</span><span class="p">}</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="p">{</span><span class="n">series</span><span class="p">}</span><span class="o">/</span><span class="n">bold</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>
<span class="n">outputSubjectListLocation</span><span class="p">:</span>   <span class="o">/</span><span class="n">save</span><span class="o">/</span><span class="n">configs</span><span class="o">/</span><span class="n">here</span>
<span class="n">subjectListName</span><span class="p">:</span>             <span class="n">data_config_name</span>
</pre></div>
</div>
<p>You can also fill in the AWS credentials file field, and the inclusion and exclusion fields, as needed.</p>
<p>Once your data settings file is ready, generate your data configuration file by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cpac</span> <span class="n">utils</span> <span class="n">data_config</span> <span class="n">build</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">data_settings</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-path-templates">
<h2>Custom Path Templates<a class="headerlink" href="#custom-path-templates" title="Permalink to this headline">¶</a></h2>
<p>Here are the file path templates used for the <a class="reference external" href="http://fcon_1000.projects.nitrc.org/fcpClassic/FcpTable.html">1000 Functional Connectomes</a> data release, as well as an illustration of the directory structure used for the release:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Anatomical</span> <span class="n">Template</span><span class="p">:</span>  <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="p">{</span><span class="n">site</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">participant</span><span class="p">}</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">mprage_anonymized</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>
<span class="n">Functional</span> <span class="n">Template</span><span class="p">:</span>  <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="p">{</span><span class="n">site</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">participant</span><span class="p">}</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">rest</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<div class="figure">
<img alt="_images/fcon_structure.png" src="_images/fcon_structure.png" />
</div>
<p>Another example is the file structure used by the <a class="reference external" href="http://fcon_1000.projects.nitrc.org/indi/abide/">ABIDE</a> and <a class="reference external" href="http://fcon_1000.projects.nitrc.org/indi/adhd200/">ADHD-200</a> releases:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Anatomical</span> <span class="n">Template</span><span class="p">:</span>  <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="p">{</span><span class="n">site</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">participant</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">session</span><span class="p">}</span><span class="o">/</span><span class="n">anat_</span><span class="o">*/</span><span class="n">mprage</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>
<span class="n">Functional</span> <span class="n">Template</span><span class="p">:</span>  <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="p">{</span><span class="n">site</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">participant</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">session</span><span class="p">}</span><span class="o">/</span><span class="n">rest_</span><span class="o">*/</span><span class="n">rest</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<div class="figure">
<img alt="_images/abide_adhd_structure.png" src="_images/abide_adhd_structure.png" />
</div>
<p>A final example is the file structure used by the <a class="reference external" href="http://fcon_1000.projects.nitrc.org/indi/enhanced/">Enhanced Nathan Kline Institute-Rockland Sample</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Anatomical</span> <span class="n">Template</span><span class="p">:</span>  <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="p">{</span><span class="n">site</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">participant</span><span class="p">}</span><span class="o">/</span><span class="n">anat</span><span class="o">/</span><span class="n">mprage</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>
<span class="n">Functional</span> <span class="n">Template</span><span class="p">:</span>  <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="p">{</span><span class="n">site</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">participant</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">session</span><span class="p">}</span><span class="o">/</span><span class="n">RfMRI_</span><span class="o">*/</span><span class="n">rest</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<div class="figure">
<img alt="_images/nki-rs_template.png" src="_images/nki-rs_template.png" />
</div>
<p>Users experiencing difficulties defining file path templates may want to re-organize their data to match one of the examples above. If you manually define a file path template and encounter an error when attempting to generate participant lists, please <a class="reference internal" href="help.html"><span class="doc">contact us</span></a> and we will be happy to help.</p>
</div>
<div class="section" id="data-yaml-fields">
<h2>Data YAML Fields<a class="headerlink" href="#data-yaml-fields" title="Permalink to this headline">¶</a></h2>
<p>The data configuration builder GUI or the <code class="docutils literal notranslate"><span class="pre">cpac_data_config_setup.py</span></code> command line utility will produce a YAML file containing all of the participants and various properties associated with that participant, such as its ID, session number, the location of its resting-state/functional and anatomical scans. Before each participant definition there is a single line with a dash, which indicates that start of the property definitions. Participant properties are indented under this dash. To illustrate, see the sample participant definition below:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># example of data stored locally</span>
<span class="p p-Indicator">-</span>
    <span class="nt">subject_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sub01</span>
    <span class="nt">unique_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ses01</span>
    <span class="nt">anat</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/site01/sub01/ses01/anatomical.nii.gz</span>
    <span class="nt">creds_path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">None</span>
    <span class="nt">func</span><span class="p">:</span>
      <span class="nt">scan_1</span><span class="p">:</span>
        <span class="nt">scan</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/site01/sub01/ses01/scan_1_func.nii.gz</span>
        <span class="nt">scan_parameters</span><span class="p">:</span>
          <span class="nt">acquisition</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">seq+z</span>
          <span class="nt">firsttr (start volume index)</span><span class="p">:</span> <span class="s">&#39;&#39;</span>
          <span class="nt">lasttr (final volume index)</span><span class="p">:</span> <span class="s">&#39;&#39;</span>
          <span class="nt">reference</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">27</span>
          <span class="nt">tr</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3.0</span>
    <span class="nt">site</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">site01</span>
<span class="p p-Indicator">-</span>
    <span class="nt">subject_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sub02</span>
    <span class="nt">unique_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ses02</span>
    <span class="nt">anat</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/site01/sub02/ses02/anatomical.nii.gz</span>
    <span class="nt">creds_path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">None</span>
    <span class="nt">func</span><span class="p">:</span>
      <span class="nt">scan_1</span><span class="p">:</span>
        <span class="nt">scan</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/site01/sub02/ses02/scan_1_func.nii.gz</span>
        <span class="nt">scan_parameters</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">None</span>
    <span class="nt">site</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">site01</span>

<span class="c1"># example of data stored on an AWS S3 bucket</span>
<span class="p p-Indicator">-</span>
    <span class="nt">subject_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sub200</span>
    <span class="nt">unique_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ses-1</span>
    <span class="nt">anat</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3://s3_bucket/path/to/site_A/sub200/anatomical.nii.gz</span>
    <span class="nt">creds_path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">None (or) /path/to/AWS_credentials.csv</span>
    <span class="nt">func</span><span class="p">:</span>
      <span class="nt">scan_name_REST</span><span class="p">:</span>
        <span class="nt">scan</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3://s3_bucket/path/to/site_A/sub200/scan_name_REST_func.nii.gz</span>
        <span class="nt">scan_parameters</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3://s3_bucket/path/to/site_A/scan_name_REST_func.json</span>
    <span class="nt">site</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">site_A</span>

<span class="c1"># with a brain mask for brain extraction (bypassing skull-stripping)</span>
<span class="p p-Indicator">-</span>
    <span class="nt">subject_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sub02</span>
    <span class="nt">unique_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ses02</span>
    <span class="nt">anat</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/site01/sub02/ses02/anatomical.nii.gz</span>
    <span class="nt">brain_mask</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/site01/sub02/ses02/brain-mask.nii.gz</span>
    <span class="nt">creds_path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">None</span>
    <span class="nt">func</span><span class="p">:</span>
      <span class="nt">scan_1</span><span class="p">:</span>
        <span class="nt">scan</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/site01/sub02/ses02/scan_1_func.nii.gz</span>
        <span class="nt">scan_parameters</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">None</span>
    <span class="nt">site</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">site01</span>

<span class="c1"># with field map files for distortion correction</span>
<span class="p p-Indicator">-</span>
    <span class="nt">subject_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sub01</span>
    <span class="nt">unique_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ses01</span>
    <span class="nt">anat</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/site01/sub01/ses01/anatomical.nii.gz</span>
    <span class="nt">creds_path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">None</span>
    <span class="nt">func</span><span class="p">:</span>
      <span class="nt">scan_1</span><span class="p">:</span>
        <span class="nt">scan</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/site01/sub01/ses01/scan_1_func.nii.gz</span>
        <span class="nt">fmap_phase</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/site01/sub01/ses01/scan_1_phase-diff.nii.gz</span>
        <span class="nt">fmap_mag</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/site01/sub01/ses01/scan_1_magnitude.nii.gz</span>
    <span class="nt">site</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">site01</span>
</pre></div>
</div>
<p>Note that more than one functional scan is defined under the <cite>func</cite> key (i.e., multiple series), and that individual scan parameters can be defined to override the settings used in the C-PAC pipeline configuration GUI.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/cpac_logo_vertical.png" alt="Logo"/>
            </a></p>
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick.html">1. C-PAC Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Specify Your Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-gui">Using the GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#from-terminal">From Terminal</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-bids-format">Data: BIDS Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-custom-layout">Data: Custom Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-path-templates">Custom Path Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-yaml-fields">Data YAML Fields</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pipeline_config.html">3. Select Your Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="preprocessing.html">4. Pre-Process Your Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="derivatives.html">5. Compute Derivatives</a></li>
<li class="toctree-l1"><a class="reference internal" href="running.html">6. All Run Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_analysis.html">7. Run Group Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_dir.html">8. Check Your Outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">9. Troubleshoot</a></li>
<li class="toctree-l1"><a class="reference internal" href="rnotes.html">10. Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">11. Appendix</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="pipeline_config.html" title="Setting Up A Pipeline Configuration"
             >next</a> |</li>
        <li class="right" >
          <a href="quick.html" title="C-PAC Quickstart"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">C-PAC 1.6.0 Beta documentation</a> &#187;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, C-PAC Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-19224662-10"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-19224662-10');
    </script>

  </body>
</html>